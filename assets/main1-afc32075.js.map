{"version":3,"file":"main1-afc32075.js","sources":["../../src/main1.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\nimport { bootstrapExtra } from \"@workadventure/scripting-api-extra\";\n\nconsole.log('Script started successfully');\n\n// Waiting for the API to be ready\nWA.onInit().then(() => {\n    console.log('Scripting API ready');\n    console.log('Player tags: ',WA.player.tags)\n\n    const mapUrl = WA.room.mapURL\n    const root = mapUrl.substring(0, mapUrl.lastIndexOf(\"/\"))\n    //let currentMapName = \"campus\"\n\n    if(WA.player.tags.includes(\"admin\")) {\n        WA.player.setOutlineColor(0, 119, 141);\n    }\n\n    // Code pour cacher les portes\n    WA.room.area.onEnter(\"atelier\").subscribe(() => {\n        WA.room.hideLayer(\"murs/atelier\")\n    })\n    WA.room.area.onLeave(\"atelier\").subscribe(() => {\n        WA.room.showLayer(\"murs/atelier\")\n    })\n\n    WA.room.area.onEnter(\"bureauA\").subscribe(() => {\n        WA.room.hideLayer(\"murs/bureauA\")\n    })\n    WA.room.area.onLeave(\"bureauA\").subscribe(() => {\n        WA.room.showLayer(\"murs/bureauA\")\n    })\n\n      WA.room.area.onEnter(\"bureauB\").subscribe(() => {\n        WA.room.hideLayer(\"murs/bureauB\")\n    })\n    WA.room.area.onLeave(\"bureauB\").subscribe(() => {\n        WA.room.showLayer(\"murs/bureauB\")\n    })\n\n    WA.room.area.onEnter(\"reunionB\").subscribe(() => {\n        WA.room.hideLayer(\"murs/reunionB\")\n        WA.room.hideLayer(\"basMurs/basReunionB\")\n    })\n    WA.room.area.onLeave(\"reunionB\").subscribe(() => {\n        WA.room.showLayer(\"murs/reunionB\")\n        WA.room.showLayer(\"basMurs/basReunionB\")\n    })\n\n     WA.room.area.onEnter(\"reunionA\").subscribe(() => {\n        WA.room.hideLayer(\"murs/reunionA\")\n        WA.room.hideLayer(\"basMurs/basReunionA\")\n    })\n    WA.room.area.onLeave(\"reunionA\").subscribe(() => {\n        WA.room.showLayer(\"murs/reunionA\")\n        WA.room.showLayer(\"basMurs/basReunionA\")\n    })\n\n    // Bouton guide\n    console.log('Ajout du bouton Guide utilisateur');\n    WA.ui.actionBar.addButton({\n        id: 'help-btn',\n        type: 'action',\n        imageSrc: root + '/help.svg',\n        toolTip: \"Guide utilisateur\",\n        callback: () => {\n            WA.ui.modal.openModal({\n                title: \"Guide utilisateur\",\n                src: \"https://u2l.fr/guidewa\",\n                allowApi: false,\n                allow: \"microphone; camera\",\n                position: \"center\",\n            }, () => WA.ui.modal.closeModal())\n        }\n    });\n\n    // Bouton évaluation\n    console.log('Ajout du bouton Évaluation');\n    WA.ui.actionBar.addButton({\n        id: 'evaluation-btn',\n        type: 'action',\n        imageSrc: root + '/star.svg',\n        toolTip: \"Évaluation\",\n        callback: () => {\n            WA.ui.modal.openModal({\n                title: \"Guide utilisateur\",\n                src: \"https://u2l.fr/evalsantewa\",\n                allowApi: false,\n                allow: \"microphone; camera\",\n                position: \"center\",\n            }, () => WA.ui.modal.closeModal())\n        }\n    });\n\n   /* WA.ui.actionBar.addButton({\n        id: 'move-btn',\n        type: 'action',\n        imageSrc: root + '/arrows-to-center.svg',\n        toolTip: \"M'envoyer à l'accueil\",\n        callback: () => {\n            // If the player is already on the destination map, the page won't reload and the moveTo parameter won't be applied\n            // So we make a direct call to the moveTo feature instead using the API\n            if (currentMapName === \"accueil\") {\n                const x = 81 * 32;\n                const y = 29 * 32;\n                WA.player.moveTo(x, y);\n            } else {\n                WA.nav.goToRoom(\"https://play.workadventu.re/@/universite-de-lorraine/pleiades/accueil#moveTo=accueil\")\n            }\n        }\n    });\n    \n    WA.ui.actionBar.addButton({\n        id: 'plan-btn',\n        type: 'action',\n        imageSrc: root + '/map-plan.svg',\n        toolTip: \"Ouvrir le plan\",\n        callback: () => {\n            WA.ui.modal.openModal({\n                title: \"Plan\",\n                src: `${root}/map-overview/index.html?image=${currentMapName}.png`,\n                allowApi: false,\n                allow: \"microphone; camera\",\n                position: \"center\",\n            }, () => WA.ui.modal.closeModal())\n        }\n    });\n    WA.ui.actionBar.addButton({\n        id: 'program-btn',\n        type: 'action',\n        imageSrc: root + '/program-schedule.svg',\n        toolTip: \"Ouvrir le programme de la journée\",\n        callback: () => {\n            WA.ui.modal.openModal({\n                title: \"Plan\",\n                src: root + '/Programme.pdf',\n                allowApi: false,\n                allow: \"microphone; camera\",\n                position: \"center\",\n            }, () => WA.ui.modal.closeModal())\n        }\n    });\n    */\n\n    // The line below bootstraps the Scripting API Extra library that adds a number of advanced properties/features to WorkAdventure\n    bootstrapExtra().then(() => {\n        console.log('Scripting API Extra ready');\n        // Update current map name\n        // currentMapName = WA.state.loadVariable('mapName') as string;\n    }).catch(e => console.error(e));\n\n}).catch(e => console.error(e));\n\nexport {};\n"],"names":["mapUrl","root","bootstrapExtra","e"],"mappings":"uCAIA,QAAQ,IAAI,6BAA6B,EAGzC,GAAG,OAAA,EAAS,KAAK,IAAM,CACnB,QAAQ,IAAI,qBAAqB,EACjC,QAAQ,IAAI,gBAAgB,GAAG,OAAO,IAAI,EAEpC,MAAAA,EAAS,GAAG,KAAK,OACjBC,EAAOD,EAAO,UAAU,EAAGA,EAAO,YAAY,GAAG,CAAC,EAGrD,GAAG,OAAO,KAAK,SAAS,OAAO,GAC9B,GAAG,OAAO,gBAAgB,EAAG,IAAK,GAAG,EAIzC,GAAG,KAAK,KAAK,QAAQ,SAAS,EAAE,UAAU,IAAM,CACzC,GAAA,KAAK,UAAU,cAAc,CAAA,CACnC,EACD,GAAG,KAAK,KAAK,QAAQ,SAAS,EAAE,UAAU,IAAM,CACzC,GAAA,KAAK,UAAU,cAAc,CAAA,CACnC,EAED,GAAG,KAAK,KAAK,QAAQ,SAAS,EAAE,UAAU,IAAM,CACzC,GAAA,KAAK,UAAU,cAAc,CAAA,CACnC,EACD,GAAG,KAAK,KAAK,QAAQ,SAAS,EAAE,UAAU,IAAM,CACzC,GAAA,KAAK,UAAU,cAAc,CAAA,CACnC,EAEC,GAAG,KAAK,KAAK,QAAQ,SAAS,EAAE,UAAU,IAAM,CAC3C,GAAA,KAAK,UAAU,cAAc,CAAA,CACnC,EACD,GAAG,KAAK,KAAK,QAAQ,SAAS,EAAE,UAAU,IAAM,CACzC,GAAA,KAAK,UAAU,cAAc,CAAA,CACnC,EAED,GAAG,KAAK,KAAK,QAAQ,UAAU,EAAE,UAAU,IAAM,CAC1C,GAAA,KAAK,UAAU,eAAe,EAC9B,GAAA,KAAK,UAAU,qBAAqB,CAAA,CAC1C,EACD,GAAG,KAAK,KAAK,QAAQ,UAAU,EAAE,UAAU,IAAM,CAC1C,GAAA,KAAK,UAAU,eAAe,EAC9B,GAAA,KAAK,UAAU,qBAAqB,CAAA,CAC1C,EAEA,GAAG,KAAK,KAAK,QAAQ,UAAU,EAAE,UAAU,IAAM,CAC3C,GAAA,KAAK,UAAU,eAAe,EAC9B,GAAA,KAAK,UAAU,qBAAqB,CAAA,CAC1C,EACD,GAAG,KAAK,KAAK,QAAQ,UAAU,EAAE,UAAU,IAAM,CAC1C,GAAA,KAAK,UAAU,eAAe,EAC9B,GAAA,KAAK,UAAU,qBAAqB,CAAA,CAC1C,EAGD,QAAQ,IAAI,mCAAmC,EAC5C,GAAA,GAAG,UAAU,UAAU,CACtB,GAAI,WACJ,KAAM,SACN,SAAUC,EAAO,YACjB,QAAS,oBACT,SAAU,IAAM,CACT,GAAA,GAAG,MAAM,UAAU,CAClB,MAAO,oBACP,IAAK,yBACL,SAAU,GACV,MAAO,qBACP,SAAU,UACX,IAAM,GAAG,GAAG,MAAM,WAAY,CAAA,CACrC,CAAA,CACH,EAGD,QAAQ,IAAI,4BAA4B,EACrC,GAAA,GAAG,UAAU,UAAU,CACtB,GAAI,iBACJ,KAAM,SACN,SAAUA,EAAO,YACjB,QAAS,aACT,SAAU,IAAM,CACT,GAAA,GAAG,MAAM,UAAU,CAClB,MAAO,oBACP,IAAK,6BACL,SAAU,GACV,MAAO,qBACP,SAAU,UACX,IAAM,GAAG,GAAG,MAAM,WAAY,CAAA,CACrC,CAAA,CACH,EAqDcC,EAAA,EAAE,KAAK,IAAM,CACxB,QAAQ,IAAI,2BAA2B,CAAA,CAG1C,EAAE,SAAW,QAAQ,MAAMC,CAAC,CAAC,CAElC,CAAC,EAAE,MAAMA,GAAK,QAAQ,MAAMA,CAAC,CAAC"}